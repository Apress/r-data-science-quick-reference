## ---- echo=FALSE---------------------------------------------------------
set.seed(5)


## ------------------------------------------------------------------------
factor(c("A", "C", "B"))


## ------------------------------------------------------------------------
factor(c("A", "C", "B"), levels = c("A", "B", "C", "D"))
factor(c("A", "C", "B"), levels = c("D", "C", "B", "A"))


## ------------------------------------------------------------------------
factor(c("A", "C", "B"), levels = c("A", "B"))


## ------------------------------------------------------------------------
f1 <- as.factor(c("C", "B", "B", "A", "D"))
f1 # levels ordered alphabetically


## ------------------------------------------------------------------------
f2 <- as_factor(c("C", "B", "B", "A", "D"))
f2 # levels in the order they appear in the input


## ------------------------------------------------------------------------
f1
f2


## ------------------------------------------------------------------------
fct_c(f1, f2)


## ------------------------------------------------------------------------
fct_c(f2, f1)


## ------------------------------------------------------------------------
f3 <- as_factor(c("X", "Y", "A"))


## ------------------------------------------------------------------------
fct_c(f1, f3)


## ------------------------------------------------------------------------
fct_c(f3, f1)


## ------------------------------------------------------------------------
fct_c(f1, f2, f3)
fct_c(f2, f3, f1)
fct_c(f3, f1, f2)


## ------------------------------------------------------------------------
fct_unify(fs = list(f1, f2, f3))


## ------------------------------------------------------------------------
fct_collapse(
    fct_c(f3, f1),
    a = c("A", "X"),
    b = c("B", "Y"),
    c = c("C", "D")
)


## ------------------------------------------------------------------------
fct_collapse(
    fct_c(f3, f1),
    a = c("A", "X"),
    b = c("B", "Y")
)


## ------------------------------------------------------------------------
f1
fct_recode(f1, a = "A", b = "B")
fct_recode(f1, X = "A", X = "B", Y = "C", Y = "D")


## ------------------------------------------------------------------------
f <- factor(sample(1:10, 20, replace = TRUE), levels = 1:10)
table(f)
f %>% fct_lump(n = 5, other_level = "X") %>% table()
f %>% fct_lump(n = 2, other_level = "X") %>% table()


## ------------------------------------------------------------------------
f %>% fct_lump(n = -2, other_level = "X") %>% table()


## ------------------------------------------------------------------------
f %>% fct_lump(prop = 0.1, other_level = "X") %>% table()


## ------------------------------------------------------------------------
f %>% fct_lump(prop = -0.1, other_level = "X") %>% table()


## ------------------------------------------------------------------------
f %>% fct_other(keep = 1:5, other_level = "X")
f %>% fct_other(drop = 1:5, other_level = "X")


## ------------------------------------------------------------------------
f1
levels(f1) <- LETTERS[1:10]
f1
fct_drop(f1)


## ------------------------------------------------------------------------
f1
f3
fct_expand(f1, levels(f3))


## ------------------------------------------------------------------------
f2
fna <- f2
fna[2] <- NA
fna[3] <- NA
fna
fna <- fct_explicit_na(fna, na_level = "Missing")
fna


## ------------------------------------------------------------------------
f <- factor(sample(LETTERS[1:5], 10, replace = TRUE))
f


## ------------------------------------------------------------------------
fct_inorder(f)


## ------------------------------------------------------------------------
fct_inorder(f, ordered = TRUE)


## ------------------------------------------------------------------------
factor(f, levels = sort(levels(f)))
factor(f, levels = sort(levels(f)), ordered = TRUE)


## ------------------------------------------------------------------------
table(f)
fct_infreq(f)
f %>% fct_infreq() %>% table()
f %>% fct_infreq(ordered = TRUE)
f %>% fct_infreq() %>% fct_rev() %>% table()

